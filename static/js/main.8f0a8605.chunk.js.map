{"version":3,"sources":["components/Uploader.js","App.js","index.js"],"names":["UploadComponent","selectedFile","setSelectedFile","useState","_jsxs","children","_jsx","type","onChange","event","target","files","onClick","handleUpload","alert","formData","FormData","append","name","axios","get","headers","authorizationToken","then","response","uploadUrl","JSON","parse","data","body","console","log","put","mime","lookup","res","window","location","reload","catch","err","error","App","className","basename","ReactDOM","render","React","StrictMode","document","getElementById"],"mappings":"yPA6DeA,MAzDSA,KACtB,MAAOC,EAAcC,GAAmBC,mBAAS,MAgDjD,OACEC,eAAA,OAAAC,SAAA,CACEC,cAAA,SAAOC,KAAK,OAAOC,SAhDGC,IACxBP,EAAgBO,EAAMC,OAAOC,MAAM,OAgDjCL,cAAA,UAAQM,QA7CSC,KACnB,IAAKZ,EAEH,YADAa,MAAM,wBAIN,MAAMC,EAAW,IAAIC,SACrBD,EAASE,OAAO,OAAQhB,GACxBc,EAASE,OAAO,WAAYhB,EAAaiB,MAGzCC,IAAMC,IAAI,sEAAwE,CAChFC,QAAS,CACPC,mBAAqB,aACrB,eAAgB,mBAChB,8BAA+B,IAC/B,+BAAgC,IAEhC,+BAAgC,OAEjCC,MAAMC,IACP,MAAMC,EAAYC,KAAKC,MAAMH,EAASI,KAAKC,MAAMJ,UACjDK,QAAQC,IAAIP,GACZM,QAAQC,IAAIN,GAGZN,IAAMa,IAAIP,EAAWxB,EAAc,CACjCoB,QAAS,CACP,eAAgBY,IAAKC,OAAOjC,EAAaiB,OAAS,8BAEnDK,MAAMY,IACPL,QAAQC,IAAII,GACZrB,MAAM,oCACNsB,OAAOC,SAASC,QAAO,MACtBC,OAAOC,IACRV,QAAQC,IAAIS,SAEbD,OAAOE,IACVX,QAAQW,MAAM,8BAA+BA,OAOfpC,SAAC,eC3CtBqC,MATf,WACE,OACEpC,cAAA,OAAKqC,UAAU,MAAMC,SAAS,mBAAkBvC,SAE9CC,cAACN,EAAe,OCHtB6C,IAASC,OACP1C,eAAC2C,IAAMC,WAAU,CAAA3C,SAAA,CACfC,cAACoC,EAAG,IAAI,OAEVO,SAASC,eAAe,W","file":"static/js/main.8f0a8605.chunk.js","sourcesContent":["import React, { useState } from 'react';\nimport axios from 'axios';\nimport mime from 'mime-types';\n\nconst UploadComponent = () => {\n  const [selectedFile, setSelectedFile] = useState(null);\n\n  const handleFileChange = (event) => {\n    setSelectedFile(event.target.files[0]);\n  };\n\n  const handleUpload = () => {\n    if (!selectedFile) {\n      alert('Please select a file');\n      return;\n    }\n      // Prepare FormData with the file and filename\n      const formData = new FormData();\n      formData.append('file', selectedFile);\n      formData.append('filename', selectedFile.name);\n\n      // Send a POST request to your API Gateway endpoint to get the pre-signed URL and file key\n      axios.get('https://16jkxdhqgg.execute-api.us-east-1.amazonaws.com/development/',  {\n        headers: {\n          authorizationToken : \"authorizer\",\n          \"Content-Type\": \"application/json\",\n          \"Access-Control-Allow-Origin\": \"*\",\n          \"Access-Control-Allow-Headers\": \"*\",\n          // \"Access-Control-Request-Headers\": \"*\",\n          \"Access-Control-Allow-Methods\": \"*\",\n        }\n      }).then((response) => {\n        const uploadUrl = JSON.parse(response.data.body).uploadUrl;\n        console.log(response);\n        console.log(uploadUrl);\n  \n        // Send a PUT request to the pre-signed URL with the file content\n        axios.put(uploadUrl, selectedFile, {\n          headers: {\n            'Content-Type': mime.lookup(selectedFile.name) || 'application/octet-stream'\n          }\n        }).then((res)=>{\n          console.log(res);\n          alert(`File uploaded successfully to S3`);\n          window.location.reload(false);\n        }).catch((err)=>{\n          console.log(err);\n        });\n      }).catch((error) => {\n      console.error('Error uploading file to S3:', error);\n    });\n  };\n\n  return (\n    <div>\n      <input type=\"file\" onChange={handleFileChange} />\n      <button onClick={handleUpload}>Upload</button>\n    </div>\n  );\n};\n\nexport default UploadComponent;\n\n\n// import React, {useState} from \"react\";\n// import \"react-dropzone-uploader/dist/styles.css\";\n// import Dropzone from \"react-dropzone-uploader\";\n\n// const cors = require('cors');\n\n// const Uploader = () => {\n//   const axios = require(\"axios\").default;\n//   const [token,setToken] = useState(\"\");\n\n//   const API_ENDPOINT =\n//     \"https://16jkxdhqgg.execute-api.us-east-1.amazonaws.com/development/\";\n//   const handleChangeStatus = ({ meta, remove }, status) => {\n//     console.log(status, meta);\n//   };\n\n//   const handleSubmit = (files) => {\n//     // console.log(e);\n//     const f = files[0];\n//     console.log(f[\"file\"]);\n//     // * GET request: presigned URL\n//     axios.get(API_ENDPOINT,{\n//       headers : {\n//         \"Content-Type\": \"application/json\",\n//         \"Access-Control-Allow-Origin\": \"*\",\n//         \"Access-Control-Allow-Headers\": \"*\",\n//         // \"Access-Control-Request-Headers\": \"*\",\n//         \"Access-Control-Allow-Methods\": \"*\",\n//         authorizationToken : token\n//       }\n//     }).then((response) => {\n//       console.log(\"Response: \", response);\n//       console.log(JSON.parse(response.data.body.toString()));\n\n//       const uploadLink = JSON.parse(response.data.body).uploadURL;\n//       console.log(\"Upload Link: \", uploadLink);\n//       // * PUT request: upload file to S3\n//       axios.put(uploadLink,{\n//         body : f[\"file\"].name,\n//         headers : {\n//           \"Content-Type\": \"application/json\",\n//           \"Access-Control-Allow-Origin\": \"*\",\n//           \"Access-Control-Allow-Headers\": \"*\",\n//           // \"Access-Control-Request-Headers\": \"*\",\n//           \"Access-Control-Allow-Methods\": \"*\",\n//         }\n//       }).then((response) => {\n//             console.log(\"Response: \", response);\n//             alert(\"File uploaded to AWS successfully\");\n//           }).catch((error)=>{\n//             console.log(error.message);\n//             alert(\"Error\");\n//           });\n//       // const result = fetch(uploadLink, {\n//       //   method: \"PUT\",\n//       //   body: f[\"file\"],\n//       // });\n//       // console.log(\"Result: \", result);\n//     }).catch((error)=>{\n//       console.log(error);\n//       alert(\"Error\");\n//     });\n//   };\n\n//   return (\n//     <div className=\"uploader\">\n//       <div id=\"token\">\n//         <label>Enter Authorization Token </label>\n//         <input id=\"token\" type=\"password\" onChange={(e)=>setToken(e.target.value)} autoFocus required/>\n//         {/* <button type=\"button\" onClick={handleSubmit}>Submit</button> */}\n//       </div>\n//       <Dropzone\n//         onChangeStatus={handleChangeStatus}\n//         onSubmit={handleSubmit}\n//         maxFiles={1}\n//         multiple={false}\n//         canCancel={false}\n//         inputContent=\"Drop A File\"\n//         styles={{\n//           dropzone: { width: 400, height: 200 },\n//           dropzoneActive: { borderColor: \"green\" },\n//         }}\n//       />\n//     </div>\n  \n//   );\n// };\n\n// <Uploader />;\n\n// export default Uploader;","import \"./App.css\";\nimport UploadComponent from \"./components/Uploader\";\n// import Uploader from \"./components/Uploader\";\n\nfunction App() {\n  return (\n    <div className=\"App\" basename=\"upload_to_aws_s3\">\n      {/* <Uploader /> */}\n      <UploadComponent/>\n    </div>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />,\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}